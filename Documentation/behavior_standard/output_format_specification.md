# Allen Institute Bonsai behavior data format standard v1.0

<img src="../Images/bonsai-lettering.svg?token=AATAHT4TLCQWUH54YLGGACDAT3QKU" height="100" />
+ 
<img src="../Images/AllenInstitute_Logo_RGB.png?token=AATAHTYYP47RH4KTUQBIBEDAT3QBQ" height="100" />
+
<img src="../Images/logo_brain_text_transp_hor_350x64.png" height="100" />

## Introduction 

### Goal of this document

The goal of this document is to describe how to organize file generated by Bonsai to be compatible with Allen Insitute data 
processing pipeline in the context of a behavior pipeline. This document is aimed both at internal engineers, data scientists,
neuro-scientists as well as external contributors and users of the Allen Institute OpenScope project. External teams can 
refer to this document to understand underlying data structure necessary to allow generation of NWB files from Bonsai files. 
We aim to provide sufficients details so that future experiments using the OpenScope pipeline can minimize delays in generating
standardized NWB files. This document is a living document that will updated as this process is refined to provide the most up-to-date
description of the current standard. 

We describe two sets of files here:
* 'Standardized Bonsai worflow files' are all the files necessary to run a functional bonsai workflow within the Allen Institute 
ecosystem. The Allen Institute pipeline hardware was designed for standardization and reproducibility of operations and deploying new code to this
system necessitates some harmonization of how the worflow and its dependencies are organized. In the context of the OpenScope project, we need to 
communicate these standards to external parties so that new functional worflows can be deployed. In addition, each bonsai workflow needs to respond and 
 communicate with standardized agents and cron jobs running on the Allen Brain Observatory pipeline. We here provide guidance to guarantee these interactions 
 are functional. 

* 'Standardized Bonsai output files' are all the files and data generated by Bonsai to track a behavioral task. Files generated by Bonsai needs to 
follow a set of specifications so that they can be detected, uploaded to our internal storage system, pre-processed and monitored by behavioral 
training agents as well as converted to final NWB files. It is critical for new behavioral tasks to adhere to this standard otherwise the entire
software stack responsible for data processing will have to be updated, which will require the coordination of multiple teams. We aim to mimimize these
efforts by providing detailed specifications up-front. 

### Version history
Small iteration of the standard that maintain backward compatibility should 
be minor releases (ie. v1.X). When backward compatibility is broken, we will make major releases (vX.0).

* v1.0 First draft of the format. 

## Standardized Bonsai worflow files

Bonsai workflows are 
## Standardized Bonsai output files

Blabla

## CSV format specification

Blabla

## CSV to SYNC conversion

Blabla

## Examples

Blabla
